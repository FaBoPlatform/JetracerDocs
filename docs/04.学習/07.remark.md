# 再アノテーション（remark)

road_following_liveおよび、road_followingの自動走行でうまくいかない場合は、再度、interactive_regressionでデータセットの追加と転移学習を実施する方法がございますが、
remarkは、作成済みのモデルに推論させ録画済みのデータやアノテーションした画像データを一枚一枚検証し、アノテーションを変更、追加、スキップできます。追加修正した画像で一から学習します。

まず、12_remark.ipynbを開いてセルを全て実行すると、下の画面が現れます。

road_followingやrecord_cameraで録画した画像を呼び出します。

record_cameraで録画しcameraフォルダを指定した場合は、taskをcamera、datasetはフォルダ名を選択します。

load imageをボタンを押して画像をロードします。（枚数によっては時間がかかります）

作成済みモデルがある場合は、読み込みモデルのドロップダウンリストから選択し、load modelをボタンを押します。次にevaluteボタンを押します。（通常、数秒間で実行）

しばらく経って、Playボタンを押すと画像が次々と表示されます。表示が速い場合は、sleep(ms)のドロップダウンリストで一枚表示の時間を選べます。

画像をスキップしたい場合は、１〜５枚の範囲でスキップできます。

ストップボタンでPlayを中断、beforeで前の画像へ、nextで次の画像に移動できます。noは画像の番号になります。

再アノテーションした画像を保存する場所を選択します。saveにあるデータセット(RE_A,RE_B,RE_C,RE_Dのいずれか),taskは通常trainを選択します。

推論結果と実行結果を検証して、アノテーション修正や画像をスキップしていきます。画像をクリックするとxyフォルダにデータが保存されます。

保存されましたら、nextボタンを押して次の画像をアノテーション作業をします。

また、スロットル量を設定したい場合は、Speedのスライドを変化させAddボタンを押します。Speedフォルダにデータが保存されます。

全てのアノテーション作業が終了したのなら、saveにあるデータセットを最初から学習させます。

任意のepochs（学習数）※のテキストボックスに入力してtrainボタンを押します。

しばらくすると学習が開始され、Progressとlossが表示されます。

※lossが十分に低くなるようにepochsを決めてください。

学習が終了したら、任意の保存モデル名を変更しsave_modelボタンを押します。

保存されたモデルはmodelに保存されます。
